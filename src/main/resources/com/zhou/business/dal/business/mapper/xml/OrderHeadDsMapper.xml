<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhou.business.dal.business.mapper.OrderHeadDsMapper">
  <resultMap id="BaseResultMap" type="com.zhou.business.dal.business.entity.OrderHeadDs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="OrderId" jdbcType="VARCHAR" property="orderid" />
    <result column="InputDate" jdbcType="TIMESTAMP" property="inputdate" />
    <result column="BraId" jdbcType="VARCHAR" property="braid" />
    <result column="SupId" jdbcType="VARCHAR" property="supid" />
    <result column="OrderType" jdbcType="CHAR" property="ordertype" />
    <result column="OrderMode" jdbcType="CHAR" property="ordermode" />
    <result column="DMId" jdbcType="VARCHAR" property="dmid" />
    <result column="PreReceiptDate" jdbcType="TIMESTAMP" property="prereceiptdate" />
    <result column="EndDate" jdbcType="TIMESTAMP" property="enddate" />
    <result column="Status" jdbcType="CHAR" property="status" />
    <result column="Status1" jdbcType="CHAR" property="status1" />
    <result column="ReceiptDate" jdbcType="TIMESTAMP" property="receiptdate" />
    <result column="ReceiptId" jdbcType="VARCHAR" property="receiptid" />
    <result column="ManagerId" jdbcType="VARCHAR" property="managerid" />
    <result column="OperatorId" jdbcType="VARCHAR" property="operatorid" />
    <result column="Remark" jdbcType="VARCHAR" property="remark" />
    <result column="updatedate" jdbcType="TIMESTAMP" property="updatedate" />
    <result column="payableflag" jdbcType="CHAR" property="payableflag" />
    <result column="currencytype" jdbcType="CHAR" property="currencytype" />
  </resultMap>
  <insert id="insert" parameterType="com.zhou.business.dal.business.entity.OrderHeadDs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into order_head_ds (OrderId, InputDate, BraId, 
      SupId, OrderType, OrderMode, 
      DMId, PreReceiptDate, EndDate, 
      Status, Status1, ReceiptDate, 
      ReceiptId, ManagerId, OperatorId, 
      Remark, updatedate, payableflag, 
      currencytype)
    values (#{orderid,jdbcType=VARCHAR}, #{inputdate,jdbcType=TIMESTAMP}, #{braid,jdbcType=VARCHAR}, 
      #{supid,jdbcType=VARCHAR}, #{ordertype,jdbcType=CHAR}, #{ordermode,jdbcType=CHAR}, 
      #{dmid,jdbcType=VARCHAR}, #{prereceiptdate,jdbcType=TIMESTAMP}, #{enddate,jdbcType=TIMESTAMP}, 
      #{status,jdbcType=CHAR}, #{status1,jdbcType=CHAR}, #{receiptdate,jdbcType=TIMESTAMP}, 
      #{receiptid,jdbcType=VARCHAR}, #{managerid,jdbcType=VARCHAR}, #{operatorid,jdbcType=VARCHAR}, 
      #{remark,jdbcType=VARCHAR}, #{updatedate,jdbcType=TIMESTAMP}, #{payableflag,jdbcType=CHAR}, 
      #{currencytype,jdbcType=CHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.zhou.business.dal.business.entity.OrderHeadDs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into order_head_ds
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="orderid != null">
        OrderId,
      </if>
      <if test="inputdate != null">
        InputDate,
      </if>
      <if test="braid != null">
        BraId,
      </if>
      <if test="supid != null">
        SupId,
      </if>
      <if test="ordertype != null">
        OrderType,
      </if>
      <if test="ordermode != null">
        OrderMode,
      </if>
      <if test="dmid != null">
        DMId,
      </if>
      <if test="prereceiptdate != null">
        PreReceiptDate,
      </if>
      <if test="enddate != null">
        EndDate,
      </if>
      <if test="status != null">
        Status,
      </if>
      <if test="status1 != null">
        Status1,
      </if>
      <if test="receiptdate != null">
        ReceiptDate,
      </if>
      <if test="receiptid != null">
        ReceiptId,
      </if>
      <if test="managerid != null">
        ManagerId,
      </if>
      <if test="operatorid != null">
        OperatorId,
      </if>
      <if test="remark != null">
        Remark,
      </if>
      <if test="updatedate != null">
        updatedate,
      </if>
      <if test="payableflag != null">
        payableflag,
      </if>
      <if test="currencytype != null">
        currencytype,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="orderid != null">
        #{orderid,jdbcType=VARCHAR},
      </if>
      <if test="inputdate != null">
        #{inputdate,jdbcType=TIMESTAMP},
      </if>
      <if test="braid != null">
        #{braid,jdbcType=VARCHAR},
      </if>
      <if test="supid != null">
        #{supid,jdbcType=VARCHAR},
      </if>
      <if test="ordertype != null">
        #{ordertype,jdbcType=CHAR},
      </if>
      <if test="ordermode != null">
        #{ordermode,jdbcType=CHAR},
      </if>
      <if test="dmid != null">
        #{dmid,jdbcType=VARCHAR},
      </if>
      <if test="prereceiptdate != null">
        #{prereceiptdate,jdbcType=TIMESTAMP},
      </if>
      <if test="enddate != null">
        #{enddate,jdbcType=TIMESTAMP},
      </if>
      <if test="status != null">
        #{status,jdbcType=CHAR},
      </if>
      <if test="status1 != null">
        #{status1,jdbcType=CHAR},
      </if>
      <if test="receiptdate != null">
        #{receiptdate,jdbcType=TIMESTAMP},
      </if>
      <if test="receiptid != null">
        #{receiptid,jdbcType=VARCHAR},
      </if>
      <if test="managerid != null">
        #{managerid,jdbcType=VARCHAR},
      </if>
      <if test="operatorid != null">
        #{operatorid,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="updatedate != null">
        #{updatedate,jdbcType=TIMESTAMP},
      </if>
      <if test="payableflag != null">
        #{payableflag,jdbcType=CHAR},
      </if>
      <if test="currencytype != null">
        #{currencytype,jdbcType=CHAR},
      </if>
    </trim>
  </insert>

  <select id="selectByOrderId" resultMap="BaseResultMap">
    select * from order_head_ds where OrderId =  #{orderid,jdbcType=VARCHAR}
  </select>

  <resultMap id="BusinessOrderSyncModel" type="com.zhou.business.dal.business.model.BusinessOrderSyncModel">
    <result column="OrderId" jdbcType="VARCHAR" property="orderid" />
    <result column="InputDate" jdbcType="TIMESTAMP" property="inputdate" />
    <result column="BraId" jdbcType="VARCHAR" property="braid" />
    <result column="SupId" jdbcType="VARCHAR" property="supid" />
    <result column="OrderType" jdbcType="CHAR" property="ordertype" />
    <result column="OrderMode" jdbcType="CHAR" property="ordermode" />
    <result column="DMId" jdbcType="VARCHAR" property="dmid" />
    <result column="PreReceiptDate" jdbcType="TIMESTAMP" property="prereceiptdate" />
    <result column="EndDate" jdbcType="TIMESTAMP" property="enddate" />
    <result column="Status" jdbcType="CHAR" property="status" />
    <result column="Status1" jdbcType="CHAR" property="status1" />
    <result column="ReceiptDate" jdbcType="TIMESTAMP" property="receiptdate" />
    <result column="ReceiptId" jdbcType="VARCHAR" property="receiptid" />
    <result column="ManagerId" jdbcType="VARCHAR" property="managerid" />
    <result column="OperatorId" jdbcType="VARCHAR" property="operatorid" />
    <result column="Remark" jdbcType="VARCHAR" property="remark" />
    <result column="updatedate" jdbcType="TIMESTAMP" property="updatedate" />
    <result column="payableflag" jdbcType="CHAR" property="payableflag" />
    <result column="currencytype" jdbcType="CHAR" property="currencytype" />
    <collection property="itemList" ofType="com.zhou.business.dal.business.entity.OrderDetailDs" resultMap="OrderDetailDs"/>
  </resultMap>
  <resultMap id="OrderDetailDs" type="com.zhou.business.dal.business.entity.OrderDetailDs">
    <result column="itemOrderId" jdbcType="VARCHAR" property="orderid" />
    <result column="ProId" jdbcType="VARCHAR" property="proid" />
    <result column="classid" jdbcType="VARCHAR" property="classid" />
    <result column="normalprice" jdbcType="NUMERIC" property="normalprice" />
    <result column="UnitId" jdbcType="VARCHAR" property="unitid" />
    <result column="OrderQty" jdbcType="NUMERIC" property="orderqty" />
    <result column="OrderPrice" jdbcType="NUMERIC" property="orderprice" />
    <result column="GifQty" jdbcType="NUMERIC" property="gifqty" />
    <result column="OrderTax" jdbcType="NUMERIC" property="ordertax" />
    <result column="SupplierQty" jdbcType="NUMERIC" property="supplierqty" />
    <result column="ReceiptQty" jdbcType="NUMERIC" property="receiptqty" />
    <result column="ReceiptPrice" jdbcType="NUMERIC" property="receiptprice" />
    <result column="ReceiptGifQty" jdbcType="NUMERIC" property="receiptgifqty" />
    <result column="ReceiptTax" jdbcType="NUMERIC" property="receipttax" />
    <result column="ReceiptAmt" jdbcType="NUMERIC" property="receiptamt" />
    <result column="PacketQty" jdbcType="NUMERIC" property="packetqty" />
    <result column="ProductDate" jdbcType="TIMESTAMP" property="productdate" />
    <result column="WarrantyDate" jdbcType="TIMESTAMP" property="warrantydate" />
    <result column="MinOrderQty" jdbcType="NUMERIC" property="minorderqty" />
    <result column="OrderMultiplier" jdbcType="NUMERIC" property="ordermultiplier" />
    <result column="BoxCode" jdbcType="VARCHAR" property="boxcode" />
    <result column="FLowId" jdbcType="INTEGER" property="flowid" />
    <result column="impost" jdbcType="NUMERIC" property="impost" />
    <result column="addedtax" jdbcType="NUMERIC" property="addedtax" />
    <result column="excisetax" jdbcType="NUMERIC" property="excisetax" />
    <result column="exrate" jdbcType="NUMERIC" property="exrate" />
    <result column="frprice" jdbcType="NUMERIC" property="frprice" />
  </resultMap>
  <select id="selectBySyncRequest" parameterType="com.zhou.business.request.BusinessOrderSyncRequest" resultMap="BusinessOrderSyncModel">
    select a.OrderId, a.InputDate, a.BraId, a.SupId, a.OrderType, a.OrderMode, a.DMId, a.PreReceiptDate, a.EndDate, a.Status, a.Status1, a.ReceiptDate,
    a.ReceiptId, a.ManagerId, a.OperatorId, a.Remark, a.updatedate, a.payableflag, a.currencytype, b.OrderId as itemOrderId, b.ProId, b.classid, b.normalprice,
    b.UnitId, b.OrderQty, b.OrderPrice, b.GifQty, b.OrderTax, b.SupplierQty, b.ReceiptQty, b.ReceiptPrice, b.ReceiptGifQty, b.ReceiptTax, b.ReceiptAmt, b.PacketQty,
    b.ProductDate, b.WarrantyDate, b.MinOrderQty, b.OrderMultiplier, b.BoxCode, b.FLowId, b.impost, b.addedtax, b.excisetax, b.exrate, b.frprice
    from order_head_ds a left join order_detail_ds b on a.OrderId=b.OrderId where a.status = #{status,jdbcType=CHAR} and a.OrderType in
    <foreach collection="orderTypeList" item="item" index="index" open="(" close=")" separator=",">
      #{item}
    </foreach>
    <if test="startTime != null ">
      and a.ReceiptDate &gt; #{startTime,jdbcType=TIMESTAMP}
    </if>
    <if test="endTime != null ">
      and a.ReceiptDate &lt;= #{endTime,jdbcType=TIMESTAMP}
    </if>
  </select>

</mapper>